import{u as L,a as G}from"./BSbsnX8W.js";import{Y as A,d as S,$ as j,a0 as x,a1 as Y,r as w,a3 as R,l as _,o as m,w as F,i as O,p as v,ac as V,R as $,c as I,y as z,O as W,D as J,a_ as Q,x as X,a4 as q,a5 as Z,a as T,e as ee,F as B,h as te}from"./DYacvIsm.js";const ae="rovingFocusGroup.onEntryFocus",re={bubbles:!1,cancelable:!0},ne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ue(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function oe(n,e,a){const r=ue(n.key,a);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ne[r]}function k(n,e=!1){const a=A();for(const r of n)if(r===a||(r.focus({preventScroll:e}),A()!==a))return}function le(n,e){return n.map((a,r)=>n[(e+r)%n.length])}const[se,ie]=j("RovingFocusGroup");var de=S({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(n,{expose:e,emit:a}){const r=n,u=a,{loop:s,orientation:i,dir:f}=x(r),y=L(f),t=Y(r,"currentTabStopId",u,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),o=w(!1),l=w(!1),d=w(0),{getItems:E,CollectionSlot:K}=R({isProvider:!0});function P(c){const b=!l.value;if(c.currentTarget&&c.target===c.currentTarget&&b&&!o.value){const g=new CustomEvent(ae,re);if(c.currentTarget.dispatchEvent(g),u("entryFocus",g),!g.defaultPrevented){const h=E().map(p=>p.ref).filter(p=>p.dataset.disabled!==""),M=h.find(p=>p.getAttribute("data-active")===""),H=h.find(p=>p.getAttribute("data-highlighted")===""),N=h.find(p=>p.id===t.value),U=[M,H,N,...h].filter(Boolean);k(U,r.preventScrollOnEntryFocus)}}l.value=!1}function D(){setTimeout(()=>{l.value=!1},1)}return e({getItems:E}),ie({loop:s,dir:y,orientation:i,currentTabStopId:t,onItemFocus:c=>{t.value=c},onItemShiftTab:()=>{o.value=!0},onFocusableItemAdd:()=>{d.value++},onFocusableItemRemove:()=>{d.value--}}),(c,b)=>(m(),_(v(K),null,{default:F(()=>[O(v(V),{tabindex:o.value||d.value===0?-1:0,"data-orientation":v(i),as:c.as,"as-child":c.asChild,dir:v(y),style:{outline:"none"},onMousedown:b[0]||(b[0]=g=>l.value=!0),onMouseup:D,onFocus:P,onBlur:b[1]||(b[1]=g=>o.value=!1)},{default:F(()=>[$(c.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),ye=de,ce=S({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const e=n,a=se(),r=G(),u=I(()=>e.tabStopId||r),s=I(()=>a.currentTabStopId.value===u.value),{getItems:i,CollectionItem:f}=R();z(()=>{e.focusable&&a.onFocusableItemAdd()}),W(()=>{e.focusable&&a.onFocusableItemRemove()});function y(t){if(t.key==="Tab"&&t.shiftKey){a.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const o=oe(t,a.orientation.value,a.dir.value);if(o!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!e.allowShiftKey&&t.shiftKey)return;t.preventDefault();let l=[...i().map(d=>d.ref).filter(d=>d.dataset.disabled!=="")];if(o==="last")l.reverse();else if(o==="prev"||o==="next"){o==="prev"&&l.reverse();const d=l.indexOf(t.currentTarget);l=a.loop.value?le(l,d+1):l.slice(d+1)}J(()=>k(l))}}return(t,o)=>(m(),_(v(f),null,{default:F(()=>[O(v(V),{tabindex:s.value?0:-1,"data-orientation":v(a).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:o[0]||(o[0]=l=>{t.focusable?v(a).onItemFocus(u.value):l.preventDefault()}),onFocus:o[1]||(o[1]=l=>v(a).onItemFocus(u.value)),onKeydown:y},{default:F(()=>[$(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),be=ce,fe=S({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const e=n,{primitiveElement:a,currentElement:r}=Q(),u=I(()=>e.checked??e.value);return X(u,(s,i)=>{if(!r.value)return;const f=r.value,y=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(y,"value").set;if(o&&s!==i){const l=new Event("input",{bubbles:!0}),d=new Event("change",{bubbles:!0});o.call(f,s),f.dispatchEvent(l),f.dispatchEvent(d)}}),(s,i)=>(m(),_(Z,q({ref_key:"primitiveElement",ref:a},{...e,...s.$attrs},{as:"input"}),null,16))}}),C=fe,pe=S({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(n){const e=n,a=I(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=I(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((u,s)=>typeof u=="object"?Object.entries(u).map(([i,f])=>({name:`${e.name}[${s}][${i}]`,value:f})):{name:`${e.name}[${s}]`,value:u}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([u,s])=>({name:`${e.name}[${u}]`,value:s})):[]);return(u,s)=>(m(),T(B,null,[ee(" We render single input if it's required "),a.value?(m(),_(C,q({key:u.name},{...e,...u.$attrs},{name:u.name,value:u.value}),null,16,["name","value"])):(m(!0),T(B,{key:1},te(r.value,i=>(m(),_(C,q({key:i.name},{ref_for:!0},{...e,...u.$attrs},{name:i.name,value:i.value}),null,16,["name","value"]))),128))],2112))}}),ge=pe;export{ye as R,ge as V,be as a};
